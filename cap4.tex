{
  \linespread{1}
  \cleardoublepage  
  \chapter{Pruebas}
  \label{chap:cap4}
}

Con el objeto de dar soporte a las plataformas m\'{a}s comunes, se realizaron pruebas sobre los principales sistemas operativos de escritorio y m\'{o}viles. Gracias a que el protocolo \textsc{WebDAV} es est\'{a}ndar, solo es cuesti\'{o}n de instalar un cliente en el sistema operativo o verificar si esta funcionalidad ya est\'{a} incorporada para acceder a servidores de archivos de este tipo.

    \section {Compatibilidad multiplataforma}

En el \textsl{Ap\'{e}ndice \ref{apdx:a}}\footnote{P\'{a}gina \pageref{apdx:a}} se muestran los pasos necesarios para realizar la conexi\'{o}n al servidor \textsc{WebDAV} tanto en sistemas operativos de escritorio como en plataformas de m\'{o}viles.

    \section {Pruebas de roles de usuario}

El sistema de almacenamiento presenta tres perfiles de usuario: staff, profesor y alumno. Los dos primeros tienen privilegios de lectura-escritura y el \'{u}ltimo tiene acceso de s\'{o}lo lectura.

El personal de la \textit{Unidad de C\'{o}mputo} verific\'{o} que cada tipo de usario cumpliera con los requerimientos de acceso y adem\'{a}s que la conexi\'{o}n al servidor se pudiera realizar de manera exitosa siguiendo los manuales presentados en el \textsl{Ap\'{e}ndice \ref{apdx:a}}.

{
 \linespread{1}
 \begin{table}[H]
 \caption{Perfiles de usuario y tipo de acceso}{}
 \label{tab:user-profiles}
 \noindent\makebox[\textwidth]
 {%
  \begin{tabular}[c]{c|l}
  \textbf{Perfil de usuario}      & \multicolumn{1}{c}{\textbf{Descripci\'{o}n}} \\
  \hline \hline
  \multirow{2}{*}{\textit{Staff}} & Acceso de lectura y escritura a su carpeta de usuario \\
                                  & Acceso de lectura a la secci\'{o}n de profesores \\
  \hline
  \textit{Profesor}               & Acceso de lectura y escritura a su carpeta de usuario \\
  \hline
  \textit{Alumno}                 & Acceso de s\'{o}lo lectura a las carpetas de profesor \\
  %\hline
  \end{tabular}
 } % ending of \makebox
 \end{table}
}

    \section {Pruebas de seguridad}

      \subsection {Detecci\'{o}n de puertos abiertos}

{
\scriptsize
\linespread{1}
\begin{verbatim}
# nmap -r -sS -sV --version-all -T 5 -oA xnas-harden xnas.tonejito.org

Starting Nmap 6.00 ( http://nmap.org ) at 2015-09-28 00:00 EDT
Nmap scan report for xnas.tonejito.org (132.248.139.147)
Host is up (0.064s latency).
Not shown: 65533 closed ports
PORT    STATE SERVICE  VERSION
22/tcp  open  ssh      OpenSSH 6.0p1 (protocol 2.0)
80/tcp  open  http     Apache httpd
443/tcp open  ssl/http Apache httpd

Service detection performed. Please report any incorrect results at http://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 256.32 seconds
\end{verbatim}
}


      \subsection {Autenticaci\'{o}n}

Las pruebas de autenticaci\'{o}n se realizaron de manera automatizada utilizando el siguiente algoritmo para iterar entre los usuarios y carpetas utilizando el cliente \textsc{WebDAV} \textsl{cadaver}:

{
\scriptsize
\linespread{1}
\begin{verbatim}
  para cada usuario u
    para cada carpeta c
      intenta acceder como el usuario u a la carpeta c
      el servidor dio acceso
        agrega el usuario y la carpeta a la lista de accesos exitosos
      caso contrario
        agrega el usuario y la carpeta a la lista de accesos fallidos
      fin de condicional
    fin de ciclo de carpetas
  fin de ciclo de usuarios
\end{verbatim}
}

      \subsection {Par\'{a}metros de cifrado para \texttt{HTTPS}}

Al realizar una verificaci\'{o}n de seguridad del cifrado \texttt{SSL} utiilizado en el \textsl{appliance}, se obtuvo una calificaci\'{o}n regular \textbf{C} y se encontraron los siguientes problemas con la configuraci\'{o}n predeterminada:

\begin{itemize}
  \item Vulnerabilidad al ataque \texttt{POODLE} \footnote{Padding Oracle On Downgraded Legacy Encryption}
% https://www.us-cert.gov/ncas/alerts/TA14-290A
% https://www.openssl.org/~bodo/ssl-poodle.pdf
% https://googleonlinesecurity.blogspot.mx/2014/10/this-poodle-bites-exploiting-ssl-30.html
% https://blog.mozilla.org/security/2014/10/14/the-poodle-attack-and-the-end-of-ssl-3-0/
% https://community.qualys.com/blogs/securitylabs/2014/10/15/ssl-3-is-dead-killed-by-the-poodle-attack

  \item El servidor soporta el algoritmo cifrado \texttt{RC4}, mismo que es clasificado como d\'{e}bil
% https://community.qualys.com/blogs/securitylabs/2013/03/19/rc4-in-tls-is-broken-now-what

  \item La configuraci\'{o}n de \texttt{SSL} aplicada no permite el uso de \textsl{Perfect Forward Secrecy}
% https://en.wikipedia.org/wiki/Forward_secrecy
\end{itemize}

  \picturebox{figures/SSL-Labs_Test-Default}{855}{663}{0.9}

Para resolver los problemas encontrados se tomaron en cuenta los requerimientos para \texttt{SSL} del est\'{a}ndar \texttt{PCI-DSS}, deshabilitando por completo el soporte de \texttt{RC4} y \texttt{SSLv3}. Gracias a la configuraci\'{o}n aplicada se obtuvo una calificaci\'{o}n buena \textbf{A}. En la siguiente imagen se muestra el resltado de las pruebas de seguridad SSL donde la \'{u}nica advertencia mostrada es referente a la autoridad que realiz\'{o} la firma del certificado.
% https://www.ssllabs.com/ssltest/analyze.html?d=xnas.tonejito.org&hideResults=on&clearCache=on

  \picturebox{figures/SSL-Labs_Test-Enhanced}{855}{533}{0.9}

